<!DOCTYPE html>
<html class="x-admin-sm">

<head>
    <meta charset="UTF-8">
    <title>用户管理</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport"
          content="width=device-width,user-scalable=yes, minimum-scale=0.4, initial-scale=0.8,target-densitydpi=low-dpi"/>
		<script src="../../js/public-source.js"></script>
		<link rel="stylesheet" href="../../lib/zTree/css/metroStyle/metroStyle.css">
</head>
<body>
<div class="x-body" id="container" v-cloak>
        <div class="conditions-box">
            <div class="form-group">
                <div class="input-group form-group-sm">
                    <div class="input-group-addon">账号</div>
                    <input type="text" class="form-control" v-model="q.account" placeholder="请输入账号" autocomplete="off" @keyup.enter="query">
                </div>
            </div>
            <button type="button" class="layui-btn layui-btn-normal"  @click="query">查询<i class="icon iconfont">&#xe618;</i></button>
			<button type="reset" class="layui-btn layui-btn-primary" @click.prevent="reset">重置<i class="icon iconfont">&#xe628;</i></button>
        </div>
        
        
        <div class="table-box">
              <div class="layui-btn-group table-handle">
									<button class="layui-btn layui-btn-normal" @click="add" >
			                <i class="icon iconfont">&#xe616;</i>新增
			            </button>
			            <button class="layui-btn layui-btn-normal" @click="update" >
			                <i class="icon iconfont">&#xe627;</i>修改
			            </button>
			            <button class="layui-btn layui-btn-danger layui-btn-sm" @click="del"
			                    >
			                <i class="icon iconfont">&#xe625;</i>删除
			            </button>
			            <button class="layui-btn layui-btn-danger layui-btn-sm" @click="resetPwd"
			                    >
			                <i class="layui-icon">&#xe652;</i>重置密码
			            </button>
			        </div>
			       	<table id="tableData" lay-filter="layui-hide"></table>

        </div>


	    	<div id="modeopen" class="write-box" style="display: none">
	            <div>
	                <div>
	                    <div><i class="layui-icon required-red layui-icon-rate-solid"></i>账号</div>
	                    <div>
	                        <input type="text" class="form-control" id="account" placeholder="账号" autocomplete="off"
                                   v-model="sysUser.account" v-bind:disabled="sysUser.id!=null">
	                    </div>
	                </div>
	                <div>
	                    <div><i class="layui-icon required-red layui-icon-rate-solid"></i>用户名</div>
	                    <div>
	                        <input type="text" class="form-control" id="username" placeholder="用户名" autocomplete="off"
                                   v-model="sysUser.username">
	                    </div>
	                </div>
	                <div>
	                    <div><i class="layui-icon required-red layui-icon-rate-solid"></i>手机号</div>
	                    <div>
	                        <input type="tel" class="form-control " placeholder="手机号" autocomplete="off"
                                   v-model="sysUser.mobile" id="mobile">
	                    </div>
	                </div>
	                <div>
	                    <div><i class="layui-icon required-red layui-icon-rate-solid"></i>email</div>
	                    <div>
	                          <input type="email" class="form-control " placeholder="email" autocomplete="off"
                                   v-model="sysUser.email" id="email">
	                    </div>
	                </div>
	                
	                <div v-if="sysUser.account!='admin'">
                        <div>状态</div>
                        <div>
                            <select v-model="sysUser.status" class="form-control">
                                <option value="1">启用</option>
                                <option value="0">禁用</option>
                            </select>
                        </div>
                    </div>
                
	                 <div>
	                      <div><i class="layui-icon required-red layui-icon-rate-solid"></i>角色</div>
	                	    <div id="userRoleIds">
                            <template v-for='sysRole in allRoles'>
                               <input class="new-checkbox" type="checkbox" v-model="userRoleIds"
                               :id="sysRole.id" :value="sysRole.id" title="sysRole.roleCnName"><label class="layui-icon layui-icon-ok"
                               :for="sysRole.id">{{sysRole.roleCnName}}</label>
                            </template>
                        </div>
                    </div>    
	            </div>

    </div>
</div>

<script>
        var timeStr = new Date().getTime();
        var str = '<script src="../../js/sys/sys_user.js?v="'+timeStr+'"><\/script>';
        document.write(str)
</script>
<script type="text/javascript" src="../../lib/zTree/js/jquery.ztree.all.min.js"></script>
</body>
</html>